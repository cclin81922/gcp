steps:
- name: 'gcr.io/cloud-builders/gcloud'
  entrypoint: 'bq'
  args:
  - query
  - --location=asia-east1
  - --time_partitioning_type=DAY
  - --append_table
  - --destination_table
  - gcp-expert-sandbox-jim:tw_dataset_dest.partitioned_table_xyz
  - --use_legacy_sql=false
  - 'SELECT * FROM `gcp-expert-sandbox-jim`.tw_dataset_src.partitioned_table_xyz WHERE _PARTITIONDATE = DATE_SUB(CURRENT_DATE(), INTERVAL 1 DAY)'

  # Don't get hung up on this just about running BigQuery commands.
  # Because you're working with containers here, you can run *anything*
  # you darn well please. It doesn't even have to be part of the GCP
  # ecosystem. Want to run some FORTRAN? Sure, go for it.
